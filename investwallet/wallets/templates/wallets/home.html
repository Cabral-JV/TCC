{% extends 'base.html' %} 
{% block content %} 

<!-- Barra de pesquisa com autocomplete -->
<div class="search-container mt-3">
    <div class="search-box">
        <form id="form-busca" method="GET">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Buscar ação..." name="q" id="busca-acao" autocomplete="off" />
                <button type="submit" class="btn btn-danger btn-search">
                    <i class="fa-solid fa-magnifying-glass me-2 text-white"></i>Procurar
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Seção principal -->
<section class="hero-section mt-5 text-center">
    <h1>Bem-vindo ao InvestWallet!</h1>
    <p>
        Transforme sua estratégia de investimentos.<br />
        Conte com recomendações inteligentes para montar sua carteira de ações.
    </p>
    <a href="{% url 'wallets:minhas_carteiras' %}" class="btn btn-danger btn-lg mt-3">
        Visualizar Minhas Carteiras
    </a>
</section>

<!-- Script de autocomplete -->
<script>
    $(function() {
        $("#busca-acao").autocomplete({
            source: "{% url 'wallets:autocomplete' %}",
            minLength: 2,
            select: function(event, ui) {
                window.location.href = "/acao/" + ui.item.value + "/";
            }
        });

        // Caso o usuário pressione "enter" sem selecionar, redireciona para /acao/{codigo}
        $("#form-busca").on("submit", function(e) {
            e.preventDefault();
            const valor = $("#busca-acao").val().split(" - ")[0].trim();
            if (valor) {
                window.location.href = "/acao/" + valor + "/";
            }
        });
    });
</script>

{% endblock %}
